<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
	xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
	layout:decorate="~{layouts/client}">

<head>
<title layout:fragment="title">Home - AccessMotor</title>
</head>

<body>

	<div layout:fragment="content">

		<!-- Hero Section -->
		<section class="hero-section bg-primary-light py-5 mb-5">
			<div class="container">
				<div class="row align-items-center">
					<div class="col-lg-6 mb-4 mb-lg-0">
						<h1 class="display-4 fw-bold mb-3">Beautiful Flowers for Every Occasion</h1>
						<p class="lead mb-4">Fresh, handcrafted arrangements delivered to your door. Celebrate life's special moments with our stunning floral designs.</p>
						<a href="/products" class="btn btn-primary btn-lg">
							<i class="bi bi-shop"></i> Shop Now
						</a>
					</div>
					<div class="col-lg-6">
						<img th:src="@{/images/products/hoacuoi/hoacuoi_01.jpg}" 
						     alt="Beautiful flower arrangement" 
						     class="img-fluid rounded shadow-lg"
						     style="max-height: 400px; width: 100%; object-fit: cover;">
					</div>
				</div>
			</div>
		</section>

		<!-- Featured Products Section -->
		<section class="featured-products py-5">
			<div class="container">
				<h2 class="text-center mb-4">Featured Products</h2>
				<div class="row g-4">
					<!-- Responsive grid: 1 col mobile, 2 col tablet, 4 col desktop -->
					<div class="col-12 col-md-6 col-lg-3" th:each="p : ${products}">
						<div class="card product-card h-100 shadow-sm">
							<!-- Product Image -->
							<a th:href="@{/products/{id}(id=${p.id})}" class="text-decoration-none">
								<div class="product-image-container">
									<img th:src="@{/images/{img}(img=${p.image})}"
									     class="card-img-top"
									     th:alt="${p.name}"
									     style="height: 250px; object-fit: cover;">
								</div>
							</a>

							<!-- Product Details -->
							<div class="card-body d-flex flex-column">
								<h5 class="card-title" th:text="${p.name}">Product Name</h5>
								<p class="card-text text-muted small" th:text="${p.category?.name}">Category</p>
								<div class="mt-auto">
									<p class="h5 text-primary mb-3" th:text="${T(poly.edu.utils.CurrencyUtil).formatVND(p.price)}">Price</p>
									<a th:href="@{/products/{id}(id=${p.id})}" class="btn btn-outline-primary w-100 mb-2">
										<i class="bi bi-eye"></i> View Details
									</a>
									<form th:action="@{/cart/add}" method="post" class="d-inline w-100">
										<input type="hidden" name="productId" th:value="${p.id}">
										<input type="hidden" name="quantity" value="1">
										<button type="submit" class="btn btn-primary w-100">
											<i class="bi bi-cart-plus"></i> Add to Cart
										</button>
									</form>
								</div>
							</div>
						</div>
					</div>
				</div>

				<!-- Pagination -->
				<nav class="mt-5" th:if="${pages > 1}">
					<ul class="pagination justify-content-center">
						<!-- First -->
						<li class="page-item" th:classappend="${page == 0} ? 'disabled'">
							<a class="page-link" th:href="@{/home(page=0, keyword=${keyword}, categoryId=${categoryId})}">
								First
							</a>
						</li>

						<!-- Previous -->
						<li class="page-item" th:classappend="${page == 0} ? 'disabled'">
							<a class="page-link" th:href="@{/home(page=${page > 0 ? page - 1 : 0}, keyword=${keyword}, categoryId=${categoryId})}">
								&laquo;
							</a>
						</li>

						<!-- Page Numbers -->
						<li class="page-item"
						    th:each="i : ${#numbers.sequence(page > 1 ? page - 2 : 0, page < pages - 2 ? page + 2 : pages - 1)}"
						    th:classappend="${i == page} ? 'active'">
							<a class="page-link" th:text="${i + 1}" th:href="@{/home(page=${i}, keyword=${keyword}, categoryId=${categoryId})}">1</a>
						</li>

						<!-- Next -->
						<li class="page-item" th:classappend="${page == pages - 1} ? 'disabled'">
							<a class="page-link" th:href="@{/home(page=${page < pages - 1 ? page + 1 : pages - 1}, keyword=${keyword}, categoryId=${categoryId})}">
								&raquo;
							</a>
						</li>

						<!-- Last -->
						<li class="page-item" th:classappend="${page == pages - 1} ? 'disabled'">
							<a class="page-link" th:href="@{/home(page=${pages - 1}, keyword=${keyword}, categoryId=${categoryId})}">
								Last
							</a>
						</li>
					</ul>
				</nav>
			</div>
		</section>

		<!-- Categories Section -->
		<section class="categories-section py-5 bg-light">
			<div class="container">
				<h2 class="text-center mb-4">Shop by Category</h2>
				<div class="row g-4">
					<!-- Responsive grid: 1 col mobile, 2 col tablet, 4 col desktop -->
					<div class="col-12 col-md-6 col-lg-3" th:each="category : ${categories}">
						<a th:href="@{/products(categoryId=${category.id})}" class="text-decoration-none">
							<div class="card category-card h-100 shadow-sm hover-lift">
								<div class="card-body text-center p-4">
									<i class="bi bi-flower1 text-primary" style="font-size: 3rem;"></i>
									<h5 class="card-title mt-3 mb-2" th:text="${category.name}">Category Name</h5>
									<p class="card-text text-muted small">Explore our collection</p>
								</div>
							</div>
						</a>
					</div>
				</div>
			</div>
		</section>

	</div>

</body>
</html>
